---
title: '07.文件操作'
tags: [ '' ]
categories: [ '' ]
---

## 文件操作

文件操作是编程中用于创建、读取、写入和管理文件的基本功能。在 Python 中，文件操作主要通过内置的 `open()` 函数及其相关方法来实现。

### 打开文件

使用 `open()` 函数可以打开一个文件，并返回一个文件对象。该函数需要两个参数：文件名和模式（mode）。常用的模式包括：

- `'r'`：读取模式（默认），文件必须存在。
- `'w'`：写入模式，文件不存在则创建，存在则覆盖。
- `'a'`：追加模式，文件不存在则创建，存在则在末尾添加内容。
- `'b'`：二进制模式，用于非文本文件，如图片或音频文件。

```python
file = open('example.txt', 'r')  # 以读取模式打开文件
```

### 读取文件

可以使用多种方法读取文件内容：

- `read(size)`：读取指定字节数的内容，若不指定则读取整个文件。
- `readline()`：读取一行内容。
- `readlines()`：读取所有行并返回一个列表。

```python
with open('example.txt', 'r') as file:
    content = file.read()  # 读取整个文件内容
    print(content)
```

### 写入文件

可以使用以下方法向文件写入内容：

- `write(string)`：将字符串写入文件。
- `writelines(list)`：将字符串列表写入文件。

```python
with open('example.txt', 'w') as file:
    file.write('Hello, World!\n')  # 写入内容到文件
```

### 关闭文件

操作完成后，应关闭文件以释放资源。可以使用 `close()` 方法关闭文件，但更推荐使用 `with` 语句，它会自动管理文件的打开和关闭。

```python
file = open('example.txt', 'r')
# 进行文件操作
file.close()  # 关闭文件
```

### 示例：完整的文件操作流程

```python
# 写入文件
with open('example.txt', 'w') as file:
    file.write('Hello, World!\n')
    file.write('This is a sample file.\n') 
# 读取文件
with open('example.txt', 'r') as file:
    content = file.read()
    print(content)
```

### 异常处理

在进行文件操作时，可能会遇到文件不存在或权限不足等异常情况。可以使用 `try-except` 块来处理这些异常。

```python
try:
    with open('nonexistent.txt', 'r') as file:
        content = file.read()
except FileNotFoundError:
    print("文件未找到，请检查文件路径。")
```