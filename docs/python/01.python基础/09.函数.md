---
title: '09.函数'
tags: [ 'python' ]
categories: [ 'python' ]
---

## 函数的定义

函数是Python中用于组织和重用代码的基本单位。通过定义函数，可以将一段代码封装起来，并在需要时多次调用。函数使用`def`
关键字来定义，后跟函数名和参数列表，最后是冒号`:`。函数体缩进表示函数的内容。

```python
# 定义一个简单的函数
def greet(name):
    print(f"Hello, {name}!")
```

## 函数参数

函数可以接受参数，以便在调用时传递不同的值。参数可以有默认值，也可以是可变数量的参数。

```python
# 带有默认参数的函数
def greet(name="Guest"):
    print(f"Hello, {name}!")
greet()          # 输出 'Hello, Guest!'
greet("Alice")  # 输出 'Hello, Alice!'
```

```python
# 带有可变数量参数的函数
def add_numbers(*args):
    return sum(args)
print(add_numbers(1, 2, 3))        # 输出 6
print(add_numbers(10, 20, 30, 40))  # 输出 100

def foo(*args, **kwargs):
    print(args)
    print(kwargs)


foo(name='Alice', age=30, city='New York') # 输出 ()  {'name': 'Alice', 'age': 30, 'city': 'New York'}

foo(1, 2, 3, name='Alice', age=30, city='New York') # 输出 (1, 2, 3)  {'name': 'Alice', 'age': 30, 'city': 'New York'}

```

## 返回值

函数可以通过`return`语句返回一个值，调用函数时可以接收这个返回值。

```python
# 定义一个返回值的函数
def square(x):
    return x * x
result = square(5)
print(result)  # 输出 25
```

## 匿名函数

匿名函数使用`lambda`关键字定义，通常用于需要一个简单函数的场合。匿名函数可以有多个参数，但只能有一个表达式。

```python
# 定义一个匿名函数
square = lambda x: x * x
print(square(6))  # 输出 36
```

## 函数作用域

函数作用域决定了变量在函数内外的可见性。局部变量在函数内部定义，只能在函数内部访问；全局变量在函数外部定义，可以在整个模块中访问。

```python
# 全局变量
x = 10
def func():
    # 局部变量
    y = 5
    print(x)  # 访问全局变量，输出 10
    print(y)  # 访问局部变量，输出 5
func()
print(x)  # 访问全局变量，输出 10
# print(y)  # 访问局部变量会报错，y未定义
```

## 模块化函数

为了提高代码的可维护性和重用性，通常会将函数组织到模块中。模块是一个包含Python代码的文件，可以通过`import`语句导入并使用其中的函数。

```python
# 假设有一个名为math_utils.py的模块，包含以下函数
def add(a, b):
    return a + b
def subtract(a, b):
    return a - b
# 在另一个文件中导入并使用math_utils模块
import math_utils
result1 = math_utils.add(10, 5)
result2 = math_utils.subtract(10, 5)
print(result1)  # 输出 15
print(result2)  # 输出 5
```

## 装饰器模式

装饰器是一种特殊的函数，用于在不修改原函数代码的情况下，动态地增强或修改函数的行为。装饰器通常用于日志记录、权限验证等场景。

```python
# 定义一个简单的装饰器
def decorator(func):
    def wrapper(*args, **kwargs):
        print("Before calling the function")
        result = func(*args, **kwargs)
        print("After calling the function")
        return result

    return wrapper


# 使用装饰器
@decorator
def say_hello(name):
    print(f"Hello, {name}!")


say_hello("Alice")

'''
输出：
Before calling the function
Hello, Alice!
After calling the function
'''
```
