---
title: '03.字符串的扩展以及新增方法'
tags: [ 'ES6','前端' ]
categories: [ 'ES6','前端' ]
---

## 字符串的扩展
### 字符的unicode表示法
ES6加强了对Unicode额支持，支持采用`\xxxx`表示一个字符，xxxx表示unicode码点
```javascript
"\u0061"
//"a"
```
但是，这种表示法只限于码点在`\u0000~\uFFFF`之间的字符。超出这个范围的字符，必须用两个双字节的形式表示。
```javascript
"\uD842\uDFB7"
// "𠮷"

"\u20BB7"
// " 7"
```
上面代码表示，如果直接在`\u`后面跟上超过`0xFFFF`的数值（比如\u20BB7），JavaScript 会理解成`\u20BB+7`。由于`\u20BB`是一个不可打印字符，所以只会显示一个空格，后面跟着一个`7`。
ES6 对这一点做出了改进，只要将码点放入大括号，就能正确解读该字符。
```javascript
console.log("\u{20BB7}")
// "𠮷"

console.log("\u{41}\u{42}\u{43}")
// "ABC"

let hello = 123;
console.log(hell\u{6F}) // 123

console.log('\u{1F680}' === '\uD83D\uDE80')
// true
```
上面代码中，最后一个例子表明，大括号表示法与四字节的 UTF-16 编码是等价的。
有了这种表示法之后，JavaScript 共有 6 种方法可以表示一个字符。
```javascript
'\z' === 'z'  // true
'\172' === 'z' // true
'\x7A' === 'z' // true
'\u007A' === 'z' // true
'\u{7A}' === 'z' // true
```

### 字符串遍历接口
ES6 为字符串添加了遍历器接口（详见[15.Iterator和for循环.md](15.Iterator%E5%92%8Cfor%E5%BE%AA%E7%8E%AF.md)），使得字符串可以被for...of循环遍历。
```javascript
for (let codePoint of 'foo'){
    console.log(codePoint);
}
```

除了遍历字符串，这个遍历器最大的优点是可以识别大于0xFFFF的码点，传统的for循环无法识别这样的码点。
```javascript
let text = String.fromCodePoint(0x20BB7);
// text内容为"𠮷"
for (let i = 0; i < text.length; i++) {
  console.log(text[i]);
}
// " "
// " "

for (let i of text) {
  console.log(i);
}
// "𠮷"
```
上面代码中，字符串text只有一个字符，但是for循环会认为它包含两个字符（都不可打印），而for...of循环会正确识别出这一个字符。

