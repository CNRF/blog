---
title: 'corn安装及使用'
tags:
  - 'corn'
  - 'linux'
categories: ['linux', 'corn']
---

::: tip 提示
本文相关系统版本均为centOS7
:::

## 安装corn依赖

```shell
# vixie-cron软件包是crontab的主程序
# crontabs软件包是用来安装、卸装、或列举用来驱动crontab守护进程的表格的程序
yum install vixie-cron
yum install crontabs
```

## corn服务启停

```shell
# 启动服务
service crond start
# 关闭服务
service crond stop
# 重启服务
service crond restart
# 重新载入配置
service crond reload
# 查看crontab服务状态
service crond status
# 设置开机启动
chkconfig crond on
```

## 新增corn任务

```shell
#  编辑
crontab -e
#此时输入需要的表达式即可
0 9 * * *  /root/addBlackIp.sh
# 删除
crontab -r
# 查看
crontab -l

```

### cron表达式

> Minute：每个小时的第几分钟执行该任务；取值范围0-59
>
> Hour：每天的第几个小时执行该任务；取值范围0-23
>
> Day：每月的第几天执行该任务；取值范围1-31
>
> Month：每年的第几个月执行该任务；取值范围1-12
>
> DayOfWeek：每周的第几天执行该任务；取值范围0-6，0表示周末
>
> CommandPath：指定要执行的程序路径

### 常见的corn表达式

```shell
0 0 2 1 * ? * 表示在每月的1日的凌晨2点调整任务
0 15 10 ? * MON-FRI 表示周一到周五每天上午10:15执行作业
0 15 10 ? 6L 2002-2006 表示2002-2006年的每个月的最后一个星期五上午10:15执行作
0 0 10,14,16 * * ? 每天上午10点,下午2点,4点
0 0/30 9-17 * * ? 朝九晚五工作时间内每半小时
0 0 12 ? * WED 表示每个星期三中午12点
0 0 12 * * ? 每天中午12点触发
0 15 10 ? * * 每天上午10:15触发
0 15 10 * * ? 每天上午10:15触发
0 15 10 * * ? * 每天上午10:15触发
0 15 10 * * ? 2005 2005年的每天上午10:15触发
0 * 14 * * ? 在每天下午2点到下午2:59期间的每1分钟触发
0 0/5 14 * * ? 在每天下午2点到下午2:55期间的每5分钟触发
0 0/5 14,18 * * ? 在每天下午2点到2:55期间和下午6点到6:55期间的每5分钟触发
0 0-5 14 * * ? 在每天下午2点到下午2:05期间的每1分钟触发
0 10,44 14 ? 3 WED 每年三月的星期三的下午2:10和2:44触发
0 15 10 ? * MON-FRI 周一至周五的上午10:15触发
0 15 10 15 * ? 每月15日上午10:15触发
0 15 10 L * ? 每月最后一日的上午10:15触发
0 15 10 ? * 6L 每月的最后一个星期五上午10:15触发
0 15 10 ? * 6L 2002-2005 2002年至2005年的每月的最后一个星期五上午10:15触发
0 15 10 ? * 6#3 每月的第三个星期五上午10:15触发
```
